"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[887],{6094:function(t,e,n){n.d(e,{AZ:function(){return m},Gr:function(){return p},I7:function(){return g},RU:function(){return a},Ww:function(){return l},Z7:function(){return w},eP:function(){return d},kY:function(){return f},tb:function(){return h}});var i=n(3578),s=n(7704),r=n(5711),o=n(2265);async function a(){if(!(0,s.jU)()||!window.navigator.requestMIDIAccess)return new Map;try{return(await window.navigator.requestMIDIAccess()).inputs}catch(t){return console.error("Error accessing MIDI devices: "+t),new Map}}async function l(){if(!(0,s.jU)()||!window.navigator.requestMIDIAccess)return new Map;try{return(await window.navigator.requestMIDIAccess()).outputs}catch(t){return console.error("Error accessing MIDI devices: "+t),new Map}}let u=new Map,c=new Map;function h(t){return u.has(t.id)}function f(t){return c.has(t.id)}function d(t){t.open(),t.addEventListener("midimessage",b),u.set(t.id,t)}function m(t){t.open(),c.set(t.id,t)}function p(t){let e=u.get(t.id);e&&(e.removeEventListener("midimessage",b),e.close(),u.delete(e.id))}function g(t){let e=c.get(t.id);e&&(e.removeEventListener("midimessage",b),e.close(),c.delete(e.id))}!async function(){await a(),await l()}();let v={f:"C",g:"D",h:"E",j:"F",k:"G",l:"A",";":"B",t:"Db",y:"Eb",i:"Gb",o:"Ab",p:"Bb"};class y{constructor(){this.octave=4,this.pressedNotes=new Map,this.listeners=[],window.addEventListener("keydown",t=>this.handleKeyDown(t)),window.addEventListener("keyup",t=>this.handleKeyUp(t))}handleKeyDown(t){if(t.repeat||t.metaKey||t.ctrlKey||t.altKey)return;let e=t.key.toLowerCase();if("arrowup"===e)this.octave=Math.min(7,this.octave+1);else if("arrowdown"===e)this.octave=Math.max(1,this.octave-1);else if(e in v){let t=v[e];this.press((0,i.qC)(t+this.octave),80)}}handleKeyUp(t){let e=t.key.toLowerCase();if(e in v){let t=v[e];this.release((0,i.qC)(t+this.octave))}}getPressedNotes(){return this.pressedNotes}press(t,e){let n=Date.now();this.pressedNotes.set(t,{time:n,vel:e}),this.notify({note:t,velocity:e,type:"down",time:n})}pressOutput(t,e){for(let s of c){var n,i=[144,t,127*e];null===(n=s[1])||void 0===n||n.send(i)}}release(t){this.pressedNotes.delete(t),this.notify({note:t,type:"up",time:Date.now()})}releaseOutput(t){for(let i of c){var e,n=[128,t,127];null===(e=i[1])||void 0===e||e.send(n)}}notify(t){this.listeners.forEach(e=>e(t))}subscribe(t){this.listeners.push(t)}unsubscribe(t){let e=this.listeners.indexOf(t);this.listeners.splice(e,1)}}let _=new y;function b(t){let e=function(t){let e=t.data;return 3!==e.length?null:{type:9==e[0]>>>4?"on":"off",note:e[1],velocity:e[2],timeStamp:t.timeStamp}}(t);if(!e)return;let{note:n,velocity:i}=e;"on"===e.type&&e.velocity>0?_.press(n,i):_.release(n)}function w(t=_){let[e,n]=(0,o.useState)(!1),i=(0,o.useRef)(null);return{startRecording:function(){if(n(!0),i.current){var e;null===(e=i.current)||void 0===e||e.call(i)}i.current=function(t){let e=[],n=null;function i(t){null===n&&(n=t.time);let i={type:"down"===t.type?"on":"off",velocity:t.velocity??127,note:t.note,timeStamp:t.time-n};e.push(i)}return t.subscribe(i),()=>(t.unsubscribe(i),e.length>0)?function(t){let e=new r.Midi,n=e.addTrack(),i=new Map;for(let e of t)if("on"===e.type)i.set(e.note,e);else{let t=i.get(e.note);if(!t)continue;i.delete(e.note),n.addNote({midi:t.note,time:t.timeStamp/1e3,duration:(e.timeStamp-t.timeStamp)/1e3,velocity:t.velocity,noteOffVelocity:e.velocity})}return e.toArray()}(e):null}(t)},stopRecording:function(){var t;n(!1);let e=(null===(t=i.current)||void 0===t?void 0:t.call(i))??new Uint8Array;return i.current=null,e},isRecording:e}}e.ZP=_},3887:function(t,e,n){n.d(e,{I0:function(){return g},K9:function(){return d},Rj:function(){return m},nn:function(){return v}});var i=n(7437),s=n(8757),r=n(2265),o=n(7807),a=n(7704),l=n(1410),u=n(6094),c=n(5590);function h(t){return t+1}class f{constructor(t){this.state=(0,o.cn)("CannotPlay"),this.score=function(){let t=(0,o.cn)(0),e=(0,o.cn)(0),n=(0,o.cn)(0),i=(0,o.cn)(0),s=(0,o.cn)(0),r=(0,o.cn)(0),l=(0,o.cn)(n=>100*n(t)+50*n(e)-25*n(i)+n(s)),u=(0,o.cn)(i=>i(t)+i(e)+i(n)===0?100:(0,a.NM)(100*(i(t)+i(e))/(i(t)+i(e)+i(n))));return{perfect:t,good:e,miss:n,pointless:i,durationHeld:s,combined:l,accuracy:u,streak:r}}(),this.song=(0,o.cn)(null),this.playInterval=null,this.currentSongTime=0,this.volume=(0,o.cn)(1),this.bpmModifier=(0,o.cn)(1),this.currentBpmIndex=(0,o.cn)(0),this.currentBpm=(0,o.cn)(t=>{var e,n;return((null===(n=t(this.song))||void 0===n?void 0:null===(e=n.bpms[t(this.currentBpmIndex)])||void 0===e?void 0:e.bpm)??120)*t(this.bpmModifier)}),this.currentIndex=0,this.lastIntervalFiredTime=0,this.playing=[],this.synths=[],this.handlers={},this.range=(0,o.cn)(null),this.hand="both",this.wait=!1,this.songHands={},this.hitNotes=new Set,this.missedNotes=new Set,this.midiPressedNotes=new Set,this.lateNotes=new Map,this.skipMissedNotes=!1,this.store=t,u.ZP.subscribe(t=>this.processMidiEvent(t))}getSong(){return this.store.get(this.song)}clearMissedNotes_(){let t=0;for(let[e,n]of this.lateNotes.entries())this.calcDiff(this.currentSongTime,n.time)>300&&(this.lateNotes.delete(e),t++,this.missedNotes.add(n));t>0&&this.store.set(this.score.streak,0),this.store.set(this.score.miss,e=>e+t)}processMidiEvent(t){var e;if(!this.getSong())return;let n=t.note;if("up"===t.type){this.midiPressedNotes.delete(n);return}this.midiPressedNotes.add(n),this.clearMissedNotes_();let i=this.lateNotes.get(n);if(i){let t=this.currentSongTime;this.lateNotes.delete(n);let e=this.calcDiff(t,i.time);if(e<150?this.store.set(this.score.perfect,h):e<300&&this.store.set(this.score.good,h),e<300){this.store.set(this.score.streak,h),this.hitNotes.add(i),this.skipMissedNotes&&this.playNote(i);return}}let s=null===(e=this.getNextNotes())||void 0===e?void 0:e.find(t=>t.midiNote===n);if(s&&!d(this,s)){let t=this.calcDiff(s.time,this.currentSongTime);t<150?this.store.set(this.score.perfect,h):t<300&&this.store.set(this.score.good,h),this.store.set(this.score.streak,h),this.hitNotes.add(s);return}this.store.set(this.score.pointless,h),this.store.set(this.score.streak,0)}calcDiff(t,e){return(t-e)*1e3/this.store.get(this.bpmModifier)}getNextNotes(){let t=this.song?this.store.get(this.song):null,e=null==t?void 0:t.notes[this.currentIndex];if(!e)return;let n=[],i=t=>t&&300>=this.calcDiff(t.time,e.time);for(let e=this.currentIndex;i(t.notes[e]);e++)n.push(t.notes[e]);return n}setWait(t){this.wait=t}isPlaying(){return"Playing"===this.store.get(this.state)}async setSong(t,e){this.stop(),this.store.set(this.song,t),this.songHands=(0,a.St)(e),this.store.set(this.state,"CannotPlay");let n=[];Object.entries(t.tracks).forEach(async([t,i])=>{var s,r;let o=(null===(s=e.tracks[+t])||void 0===s?void 0:s.instrument)??i.program??i.instrument??0;n[+t]=(0,l.j5)(o);let a=(null===(r=e.tracks[+t])||void 0===r?void 0:r.sound)?1:0;this.setTrackVolume(+t,a)}),await Promise.all(n).then(t=>{this.synths=t,this.store.set(this.state,"Paused")}),this.wait=e.waiting}setVolume(t){var e,n;this.store.set(this.volume,t),null===(e=this.synths)||void 0===e||e.forEach(e=>{null==e||e.setMasterVolume(t)});let i=null===(n=this.getSong())||void 0===n?void 0:n.backing;i&&(i.volume=.15*t)}setTrackVolume(t,e){var n,i;null===(i=this.synths)||void 0===i||null===(n=i[+t])||void 0===n||n.setMasterVolume(e)}async setTrackInstrument(t,e){let n=await (0,l.j5)(e);this.synths[+t]=n}isActiveHand(t){let{left:e,right:n}=this.songHands;return(e===t.track||n===t.track)&&("both"===this.hand||"left"===this.hand&&t.track===e||"right"===this.hand&&t.track===n)}getTime(){let t=this.getSong();if(!t)return 0;if(null==t?void 0:t.backing)return t.backing.currentTime;if(!this.isPlaying())return Math.max(0,this.currentSongTime-0);if(this.wait&&!d(this,t.notes[this.currentIndex]))return this.currentSongTime-0;let e=performance.now()-this.lastIntervalFiredTime;return Math.max(0,this.currentSongTime+e/1e3-0)}getBpm(){return this.currentBpm}increaseBpm(){var t;this.store.set(this.bpmModifier,(0,a.NM)(this.store.get(this.bpmModifier)+.05,2));let e=null===(t=this.getSong())||void 0===t?void 0:t.backing;e&&(e.playbackRate=this.store.get(this.bpmModifier))}decreaseBpm(){var t;this.store.set(this.bpmModifier,(0,a.NM)(this.store.get(this.bpmModifier)-.05,2));let e=null===(t=this.getSong())||void 0===t?void 0:t.backing;e&&(e.playbackRate=this.store.get(this.bpmModifier))}getBpmModifier(){return this.bpmModifier}setHand(t){this.hand=t}getBpmIndexForTime(t){let e=this.getSong();if(!e)return 0;let n=e.bpms.findIndex(e=>e.time>t)-1;return n<0?e.bpms.length-1:n}getMeasureForTime(t){let e=this.getSong();if(!e)return{type:"measure",number:0,duration:0,time:0};let n=e.measures.findIndex(e=>e.time>t)-1;return n<0&&(n=e.measures.length-1),e.measures[n]}play(){var t;if(this.isPlaying()||"CannotPlay"===this.store.get(this.state))return;this.currentSongTime>=this.getDuration()&&this.seek(0);let e=null===(t=this.getSong())||void 0===t?void 0:t.backing;e&&(e.volume=.15,e.play()),this.store.set(this.state,"Playing"),this.lastIntervalFiredTime=performance.now(),this.playInterval=setInterval(()=>this.playLoop_(),1),this.playing.forEach(t=>this.playNote(t))}playNote(t){this.synths[t.track].playNote(t.midiNote,t.velocity)}stopNotes(t){if(0!==t.length&&0!==this.synths.length)for(let e of t)this.synths[e.track].stopNote(e.midiNote)}updateTime_(){var t;let e=null===(t=this.getSong())||void 0===t?void 0:t.backing;if(e){let t=e.currentTime+(0,c.kq)().outputLatency;this.currentSongTime=t}let n=0;if(this.isPlaying()){let t=performance.now();n=(t-this.lastIntervalFiredTime)*this.store.get(this.bpmModifier),this.lastIntervalFiredTime=t,this.currentSongTime+=n/1e3}return this.currentSongTime}playLoop_(){var t,e;let n=this.getSong();if(!n)return;let i=this.currentSongTime,s=this.updateTime_();this.currentSongTime>=this.getDuration()&&(this.seek(this.getDuration()),this.pause());let r=this.store.get(this.range);if(r){let[t,e]=r;if(i<=e&&e<=s){this.seek(t-.5);return}}(null===(t=n.bpms[this.store.get(this.currentBpmIndex)+1])||void 0===t?void 0:t.time)<s&&this.store.set(this.currentBpmIndex,h);let o=t=>t.time+t.duration>s;this.stopNotes(this.playing.filter(t=>!o(t))),this.playing=this.playing.filter(o),this.clearMissedNotes_();let a=this.playing.filter(t=>this.midiPressedNotes.has(t.midiNote)&&this.hitNotes.has(t)).length;for(a>0&&this.store.set(this.score.durationHeld,t=>t+a);(null===(e=n.notes[this.currentIndex])||void 0===e?void 0:e.time)<s;){let t=n.notes[this.currentIndex];if(this.isActiveHand(t)){if(this.wait&&!this.hitNotes.has(t)){this.currentSongTime=t.time;return}!this.hitNotes.has(t)&&i<t.time&&this.lateNotes.set(t.midiNote,t)}this.playing.push(t),(!this.skipMissedNotes||!this.isActiveHand(t)||d(this,t))&&this.playNote(t),this.currentIndex++}}toggle(){if(this.isPlaying()){this.pause();return}this.play()}stopAllSounds(){this.stopNotes(this.playing)}pause(){var t,e;this.isPlaying()&&(this.store.set(this.state,"Paused"),clearInterval(this.playInterval),null===(e=this.store.get(this.song))||void 0===e||null===(t=e.backing)||void 0===t||t.pause(),this.playInterval=null,this.stopAllSounds())}stop(){this.pause(),this.reset_()}reset_(){var t;this.currentSongTime=0,this.currentIndex=0,this.playing=[],this.lateNotes.clear(),this.store.set(this.range,null);let e=null===(t=this.store.get(this.song))||void 0===t?void 0:t.backing;e&&(e.currentTime=0),this.hitNotes.clear(),this.missedNotes.clear(),this.store.set(this.score.good,0),this.store.set(this.score.miss,0),this.store.set(this.score.perfect,0),this.store.set(this.score.pointless,0),this.store.set(this.score.durationHeld,0),this.store.set(this.score.streak,0)}seek(t){let e=this.getSong();e&&(this.stopAllSounds(),this.currentSongTime=t,e.backing&&(e.backing.currentTime=t),this.playing=e.notes.filter(t=>t.time<this.currentSongTime&&this.currentSongTime<t.time+t.duration),e.notes.findIndex(t=>t.time>=this.currentSongTime),this.currentIndex=e.notes.findIndex(t=>t.time>=this.currentSongTime),this.store.set(this.currentBpmIndex,this.getBpmIndexForTime(t)),this.missedNotes.clear(),this.hitNotes.clear(),this.lateNotes.clear())}getRealTimeDuration(t,e){return e-t}getDuration(){var t;return(null===(t=this.store.get(this.song))||void 0===t?void 0:t.duration)??0}setRange(t){if(!t){this.store.set(this.range,null);return}let{start:e,end:n}=t;this.store.set(this.range,[Math.min(e,n),Math.max(e,n)])}getRange(){return this.range}}function d(t,e){return!!e&&t.hitNotes.has(e)}function m(t,e){return!!e&&t.missedNotes.has(e)}let p=(0,r.createContext)(null);function g({children:t}){let e=(0,s.oR)(),[n,o]=(0,r.useState)(()=>new f(e));return(0,i.jsx)(p.Provider,{value:n,children:t})}function v(){let t=(0,r.useContext)(p);if(!t)throw Error("Missing PlayerProvider");return t}},1410:function(t,e,n){n.d(e,{j5:function(){return c},A2:function(){return h},qu:function(){return s},ZN:function(){return p}});var i=n(7704),s=["acoustic_grand_piano","bright_acoustic_piano","electric_grand_piano","honkytonk_piano","electric_piano_1","electric_piano_2","harpsichord","clavinet","celesta","glockenspiel","music_box","vibraphone","marimba","xylophone","tubular_bells","dulcimer","drawbar_organ","percussive_organ","rock_organ","church_organ","reed_organ","accordion","harmonica","tango_accordion","acoustic_guitar_nylon","acoustic_guitar_steel","electric_guitar_jazz","electric_guitar_clean","electric_guitar_muted","overdriven_guitar","distortion_guitar","guitar_harmonics","acoustic_bass","electric_bass_finger","electric_bass_pick","fretless_bass","slap_bass_1","slap_bass_2","synth_bass_1","synth_bass_2","violin","viola","cello","contrabass","tremolo_strings","pizzicato_strings","orchestral_harp","timpani","string_ensemble_1","string_ensemble_2","synth_strings_1","synth_strings_2","choir_aahs","voice_oohs","synth_choir","orchestra_hit","trumpet","trombone","tuba","muted_trumpet","french_horn","brass_section","synth_brass_1","synth_brass_2","soprano_sax","alto_sax","tenor_sax","baritone_sax","oboe","english_horn","bassoon","clarinet","piccolo","flute","recorder","pan_flute","blown_bottle","shakuhachi","whistle","ocarina","lead_1_square","lead_2_sawtooth","lead_3_calliope","lead_4_chiff","lead_5_charang","lead_6_voice","lead_7_fifths","lead_8_bass__lead","pad_1_new_age","pad_2_warm","pad_3_polysynth","pad_4_choir","pad_5_bowed","pad_6_metallic","pad_7_halo","pad_8_sweep","fx_1_rain","fx_2_soundtrack","fx_3_crystal","fx_4_atmosphere","fx_5_brightness","fx_6_goblins","fx_7_echoes","fx_8_scifi","sitar","banjo","shamisen","koto","kalimba","bagpipe","fiddle","shanai","tinkle_bell","agogo","steel_drums","woodblock","taiko_drum","melodic_tom","synth_drum","reverse_cymbal","guitar_fret_noise","breath_noise","seashore","bird_tweet","telephone_ring","helicopter","applause","gunshot","percussion"],r=n(5590);let o={},a={};async function l(t){let e;if(o[t])return Promise.resolve();if(a[t])return a[t];let n=fetch(`/soundfonts/FluidR3_GM/${t}-mp3.js`);a[t]=new Promise(t=>e=t);try{let i=await (0,r.HX)(await (await n).text());o[t]=i,delete a[t],e()}catch(e){console.error(`Error fetching soundfont for: ${t}`,e)}}var u=n(6094);async function c(t){var e;return(0,i.jU)()?("number"==typeof t&&(t=s[t]),(e=t)&&s.find(t=>t===e)||(console.log("Invalid instrument: ",t,"reverting to acoustic_grand_piano."),t=s[0]),await l(t),new d(t)):{playNote(){},stopNote(){},setMasterVolume(){},getInstrument:()=>s[0]}}function h(t){return new f(t)}class f{constructor(t){this.masterVolume=1,c(t).then(t=>{this.synth=t,this.synth.setMasterVolume(this.masterVolume)})}playNote(t,e){var n;null===(n=this.synth)||void 0===n||n.playNote(t,e)}stopNote(t){var e;null===(e=this.synth)||void 0===e||e.stopNote(t)}setMasterVolume(t){var e;this.masterVolume=t,null===(e=this.synth)||void 0===e||e.setMasterVolume(t)}getInstrument(){var t;return(null===(t=this.synth)||void 0===t?void 0:t.getInstrument())??s[0]}}class d{constructor(t){this.playing=new Map;let e=o[t];if(!e)throw Error("May not instantiate a synth before its instrument has loaded: "+t);this.instrument=t,this.soundfont=e,this.masterVolume=1}playNote(t,e=63.5){if(u.ZP.pressOutput(t,this.masterVolume),!(0,r.ok)())return;let n=(0,r.D6)(t),i=(0,r.kq)(),s=i.createBufferSource();s.buffer=this.soundfont[n];let o=i.createGain();o.gain.value=e/127*this.masterVolume,s.connect(o),o.connect(i.destination),s.start(),this.playing.set(t,{gainNode:o,velocity:e,sourceNode:s})}stopNote(t){if(u.ZP.releaseOutput(t),!this.playing.has(t)||!(0,r.ok)())return;let e=(0,r.kq)().currentTime,{gainNode:n,sourceNode:i}=this.playing.get(t);n.gain.exponentialRampToValueAtTime(0===n.gain.value?parseFloat("1.40130e-44"):n.gain.value,e),n.gain.exponentialRampToValueAtTime(.01,e+.5),i.stop(e+.5),this.playing.delete(t)}setMasterVolume(t){for(let{gainNode:e,velocity:n}of(this.masterVolume=t,this.playing.values()))e.gain.value=n/127*this.masterVolume}getInstrument(){return this.instrument}}var m=n(2265);function p(t){let[e,n]=(0,m.useState)({loading:!0,error:!1});return(0,m.useEffect)(()=>{let e=!1;return n({loading:!0,error:!1}),c(t).then(()=>{e||n({loading:!1,error:!1})}).catch(t=>{e||(console.error(`Could not load synth. Error: ${t}`),n({loading:!1,error:!0}))}),()=>{e=!0}},[t]),{...e,synth:h(t)}}},5590:function(t,e,n){let i;n.d(e,{D6:function(){return m},G$:function(){return c},HX:function(){return a},ay:function(){return h},kq:function(){return l},ok:function(){return d},yM:function(){return f}});var s=n(7704),r=n(3578),o=n(7807);async function a(t){var e=t.indexOf("MIDI.Soundfont.");if(e<0)throw Error("Invalid MIDI.js Soundfont format:");e=t.indexOf("=",e)+2;var n=t.lastIndexOf(",");let i=Object.entries(JSON.parse(t.slice(e,n)+"}")).map(async([t,e])=>{var n;let i=e.slice(e.indexOf(",")+1),s=(n=Uint8Array.from(atob(i),t=>t.charCodeAt(0)).buffer,new Promise((t,e)=>{l().decodeAudioData(n,t,e)}));return[t,await s]});return Object.fromEntries(await Promise.all(i))}function l(){return void 0===i&&(i=new(window.AudioContext||window.webkitAudioContext)),i}let u=(0,o.K7)(),c=(0,o.cn)(!0);function h(){u.set(c,!1),l().close(),i=void 0}function f(){u.set(c,!0)}function d(){return u.get(c)}function m(t){return["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"][t%12]+(0,r.jO)(t)}function p(){let t=l();if(t){var e=t.createBuffer(1,1,22050),n=t.createBufferSource();n.buffer=e,n.connect(t.destination),n.start?n.start(0):n.play?n.play(0):n.noteOn&&n.noteOn(0),document.removeEventListener("touchstart",p),document.removeEventListener("touchend",p)}}(0,s.jU)()&&(document.addEventListener("touchstart",p),document.addEventListener("touchend",p))},3578:function(t,e,n){n.d(e,{km:function(){return i.km},SQ:function(){return i.SQ},xG:function(){return i.xG},qC:function(){return i.qC},jO:function(){return i.jO},Nr:function(){return i.Nr},pE:function(){return s},rx:function(){return o},iB:function(){return a}});var i=n(8813),s={staff5Lines:"",staff5LinesNarrow:"",legerLine:"",fClef:"",gClef:"",brace:"",timeSig0:"",timeSig1:"",timeSig2:"",timeSig3:"",timeSig4:"",timeSig5:"",timeSig6:"",timeSig7:"",timeSig8:"",timeSig9:"",timeSigCombNumerator:"",timeSigCombDenominator:"",noteheadBlack:"",noteEmptyBlack:"",noteAFlatBlack:"",noteABlack:"",noteASharpBlack:"",noteBFlatBlack:"",noteBBlack:"",noteBSharpBlack:"",noteCFlatBlack:"",noteCBlack:"",noteCSharpBlack:"",noteDFlatBlack:"",noteDBlack:"",noteDSharpBlack:"",noteEFlatBlack:"",noteEBlack:"",noteESharpBlack:"",noteFFlatBlack:"",noteFBlack:"",noteFSharpBlack:"",noteGFlatBlack:"",noteGBlack:"",noteGSharpBlack:"",staffPosLower1:"",staffPosLower2:"",staffPosLower3:"",staffPosLower4:"",staffPosLower5:"",staffPosLower6:"",staffPosLower7:"",staffPosLower8:"",staffPosRaise1:"",staffPosRaise2:"",staffPosRaise3:"",staffPosRaise4:"",staffPosRaise5:"",staffPosRaise6:"",staffPosRaise7:"",staffPosRaise8:"",accidentalFlat:"",accidentalNatural:"",accidentalSharp:"",accidentalDoubleSharp:"",accidentalDoubleFlat:""};let r=new Set([1,3,6,8,10]);function o(t){return r.has(t%12)}function a(t){return!o(t)}},8813:function(t,e,n){function i(){return["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"]}n.d(e,{Nr:function(){return l},SQ:function(){return a},jO:function(){return m},km:function(){return d},qC:function(){return f},xG:function(){return i}});let s={C:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],G:["C","C#","D","D#","E","F♮","F","G","G#","A","A#","B"],D:["C♮","C","D","D#","E","F♮","F","G","G#","A","A#","B"],A:["C♮","C","D","D#","E","F♮","F","G♮","G","A","A#","B"],E:["C♮","C","D♮","D","E","F♮","F","G♮","G","A","A#","B"],B:["C♮","C","D♮","D","E","F♮","F","G♮","G","A♮","A","B"],"F#":["C♮","C","D♮","D","E♮","E","F","G♮","G","A♮","A","B"],"C#":["B","C","D♮","D","E♮","E","F","G♮","G","A♮","A","B♮"],F:["C","D♭","D","E♭","E","F","G♭","G","A♭","A","B","B♮"],Bb:["C","D♭","D","E","E♮","F","G♭","G","A♭","A","B","B♮"],Eb:["C","D♭","D","E","E♮","F","G♭","G","A","A♮","B","B♮"],Ab:["C","D","D♮","E","E♮","F","G♭","G","A","A♮","B","B♮"],Db:["C","D","D♮","E","E♮","F","G","G♮","A","A♮","B","B♮"],Gb:["C♮","D","D♮","E","E♮","F","G","G♮","A","A♮","B","C"],Cb:["C♮","D","D♮","E","E","F♮","G","G♮","A","A♮","B","C"]},r={C:{notes:[],type:"sharp"},G:{notes:["F"],type:"sharp"},D:{notes:["F","C"],type:"sharp"},A:{notes:["F","C","G"],type:"sharp"},E:{notes:["F","C","G","D"],type:"sharp"},B:{notes:["F","C","G","D","A"],type:"sharp"},"F#":{notes:["F","C","G","D","A","E"],type:"sharp"},"C#":{notes:["F","C","G","D","A","E","B"],type:"sharp"},F:{notes:["B"],type:"flat"},Bb:{notes:["B","E"],type:"flat"},Eb:{notes:["B","E","A"],type:"flat"},Ab:{notes:["B","E","A","D"],type:"flat"},Db:{notes:["B","E","A","D","G"],type:"flat"},Gb:{notes:["B","E","A","D","G","C"],type:"flat"},Cb:{notes:["B","E","A","D","G","C","F"],type:"flat"}},o=Object.fromEntries(Object.entries({"-7":"Cb","-6":"Gb","-5":"Db","-4":"Ab","-3":"Eb","-2":"Bb","-1":"F",0:"C",1:"G",2:"D",3:"A",4:"E",5:"B",6:"F#",7:"C#"}).map(([t,e])=>[e,t]));function a(t){return r[t]}function l(t,e,n){var i;let s=(i=+o[n]%8,[0,2,4,5,7,9,11].map(t=>((t+7*i)%12+12)%12));return 24+(u(t,e)-1)*12+s[u(0,6)]}function u(t,e){return Math.floor(Math.random()*(e-t+1)+t)}let c={},h={};function f(t){return c[t]}function d(t,e="C"){return s[e][t%12]}function m(t){return Math.floor((t-12)/12)}!function(){let t=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"];for(let e=21;e<=108;e++){let n=(e-12)/12>>0,i=t[e%12]+n;c[i]=e,h[e]=i}}()},7704:function(t,e,n){n.d(e,{AV:function(){return u},BH:function(){return c},B_:function(){return d},D2:function(){return p},Jp:function(){return h},NM:function(){return y},Q8:function(){return _},St:function(){return b},cn:function(){return k},f5:function(){return m},hj:function(){return w},jU:function(){return a},km:function(){return r},mr:function(){return l},rC:function(){return g},tq:function(){return o},uZ:function(){return v}});var i=n(3167),s=n(1367);function r(t,e){return`${e}/${t}`}function o(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}function a(){return!0}function l(t){if(!w(t))throw Error('An argument for "seconds" was not provided for formatTime.');let e=String(Math.floor(t/60));1===e.length&&(e="0"+e);let n=String(Math.floor(t%60));return 1===n.length&&(n="0"+n),`${e}:${n}`}let u={sm:650,md:800,lg:1100};class c{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}function h(t){return t?t.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "):""}function f(t){return 7!==t.length||"#"!==t[0]?(console.error("invalid hex value."),[]):[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5),16)]}function d(t,e,n){let i=1-n,s=f(t),r=f(e);return"#"+[Math.round(s[0]*n+r[0]*i),Math.round(s[1]*n+r[1]*i),Math.round(s[2]*n+r[2]*i)].map(t=>t.toString(16).padStart(2,"0")).join("")}function m(){try{return localStorage.setItem("test","test"),!0}catch(t){return!1}}function p(t){return new Promise((e,n)=>{var i=new FileReader;i.readAsArrayBuffer(t),i.onloadend=t=>{t.target.readyState==FileReader.DONE&&e(new Uint8Array(t.target.result))},i.onerror=()=>{console.error("Failed to convert file to Uint8: ",i.error),i.abort(),n()}})}function g(t){return new Promise((e,n)=>{let i=new FileReader;i.readAsText(t),i.onloadend=()=>{i.result&&e(i.result),n(null)},i.onerror=()=>{console.error("Failed to convert file to string.",i.error),i.abort(),n(i.error)}})}function v(t,{min:e,max:n}){return isNaN(t)?n??e:(null!=e&&(t=Math.max(t,e)),null!=n&&(t=Math.min(t,n)),t)}function y(t,e=0){return t?parseFloat(t.toFixed(e)):0}function _(t,e){return Object.entries(t).reduce((t,[n,i])=>(t[n]=e(i,n),t),{})}function b(t){let e,n;for(let[i,s]of Object.entries(t.tracks))"left"===s.hand?e=parseInt(i,10):"right"===s.hand&&(n=parseInt(i,10));return{left:e,right:n}}function w(t){return Number.isFinite(t)}function k(...t){return(0,s.m6)((0,i.W)(t))}}}]);