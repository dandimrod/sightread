(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[169],{3375:function(e,t,n){Promise.resolve().then(n.bind(n,185))},185:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var i=n(7437),r=n(4012),l=n(6094),o=n(9866),s=n(1410),c=n(3578),a=n(7945),u=n(7704),d=n(2265),h=n(8818),f=n(2582);let x="Arial",p=2*f.lU;function y(){return 100+f.lU}function g(){return y()+6*f.lU}function m(e){return e.canvasSize.height/2-40}var j=n(62);function b(e){let{clef:t,displayLetter:n,generator:l}=e.config,o=t=>{e.onChange({...e.config,generator:t})},s=t=>{e.onChange({...e.config,clef:t})};return(0,i.jsxs)("div",{style:{display:"flex",position:"relative",width:"100%",height:"100%",backgroundColor:"white",flexDirection:"column",borderLeft:"1px solid black",overflowY:"auto"},children:[(0,i.jsx)(r.ne,{height:32}),(0,i.jsx)("h3",{style:{fontSize:32,color:j.D.purple.primary,textAlign:"center"},children:"Settings"}),(0,i.jsx)(r.ne,{height:36}),(0,i.jsxs)("div",{style:{fontSize:18,flexDirection:"column",textAlign:"center"},children:[(0,i.jsx)("h3",{style:{textAlign:"center"},children:"Generator"}),(0,i.jsx)(r.ne,{height:10}),(0,i.jsxs)("div",{style:{fontSize:14},children:[(0,i.jsx)("span",{children:" Random "}),(0,i.jsx)("input",{type:"radio",checked:"random"===l,onChange:()=>o("random")})]}),(0,i.jsx)(r.ne,{height:10}),(0,i.jsxs)("div",{style:{fontSize:14},children:[(0,i.jsx)("span",{children:" Sheet"}),(0,i.jsx)("input",{type:"radio",checked:"excerpts"===l,onChange:()=>o("excerpts")})]}),(0,i.jsx)(r.ne,{height:36}),(0,i.jsxs)("div",{style:{fontSize:18,flexDirection:"column",textAlign:"center"},children:[(0,i.jsx)("h3",{style:{textAlign:"center"},children:"Clef"}),(0,i.jsx)(r.ne,{height:10}),(0,i.jsxs)("div",{style:{fontSize:14},children:[(0,i.jsx)("span",{children:" Treble "}),(0,i.jsx)("input",{type:"radio",checked:"treble"===t,onChange:()=>s("treble")})]}),(0,i.jsx)(r.ne,{height:10}),(0,i.jsxs)("div",{style:{fontSize:14},children:[(0,i.jsx)("span",{children:" Bass"}),(0,i.jsx)("input",{type:"radio",checked:"bass"===t,onChange:()=>s("bass")})]})]}),(0,i.jsx)(r.ne,{height:36}),(0,i.jsxs)("div",{style:{display:"flex",fontSize:18,flexDirection:"column",alignItems:"center"},children:["Display Note Letter",(0,i.jsx)(r.ne,{height:8}),(0,i.jsx)(r.ZD,{checked:n,onChange:function(){e.onChange({...e.config,displayLetter:!n})}})]})]})]})}function v({}){let[e,t]=(0,d.useState)(!1),[n,u]=(0,d.useState)(!1),j=(0,a.UC)(()=>(0,s.A2)("acoustic_grand_piano")),[v,C]=(0,o.V_)("speedConfig",{clef:"treble",displayLetter:!1,generator:"random",keySignature:"C"}),[S,T]=(0,d.useState)(()=>({title:"Random Notes",notes:k(v.clef,v.keySignature),currentNoteIndex:0,complete:!1,speed:2,correct:0,startTime:new Date,lastNoteHitTime:new Date}));return(0,d.useEffect)(()=>{let e=e=>{(function(e,t,n,i,r){if(e.complete)return;let{note:l,type:o}=i;if("up"===o){n.stopNote(l);return}let s=e.notes[e.currentNoteIndex],c=e.currentNoteIndex>=e.notes.length-1;l===s?("down"!==o||r||n.playNote(l),t({...e,currentNoteIndex:e.currentNoteIndex+1,correct:e.correct+1,lastNoteHitTime:new Date,complete:c})):((0,h.p)(),t({...e,currentNoteIndex:e.currentNoteIndex+1,lastNoteHitTime:new Date,complete:c}))})(S,T,j,e,n)};return l.ZP.subscribe(e),function(){l.ZP.unsubscribe(e)}},[j,n,T,S]),(0,i.jsxs)("div",{children:[(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{style:{position:"absolute",top:55,width:300,height:"calc(100% - 55px)",right:0,visibility:e?"visible":"hidden",zIndex:2},children:(0,i.jsx)(b,{open:e,onChange:C,config:v})})}),(0,i.jsxs)("div",{style:{backgroundColor:"white",width:"100vw",height:"calc(100vh - 55px)",position:"fixed",top:55,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,i.jsxs)("h2",{style:{fontSize:48,alignSelf:"center"},children:[" ",S.title]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{position:"relative",height:300},children:(0,i.jsx)(r.Xz,{render:(e,t)=>{!function(e){let{ctx:t,canvasSize:n,speedState:i}=e;for(let[r,l]of(t.clearRect(0,0,n.width,n.height),function(e){let{ctx:t,canvasSize:n,speedConfig:i}=e;t.fillStyle="black",t.strokeStyle="black";let r=m(e);(0,f.jp)(t,100,r,n.width),(0,f.d4)(t,100,r-1,r+80+1),(0,f.Qb)(t,g(),r-p,r+80+p);let{clef:l}=i;"treble"===l?(0,f.p5)(t,y(),r):"bass"===l&&(0,f.oN)(t,y(),r)}(e),i.notes.slice(i.currentNoteIndex).entries()))(function(e,t,n){let{ctx:i,speedConfig:r,speedState:l}=e;i.save();let o=r.clef,s=m(e),a=g(),u=100*n+a+f.Xv/2,d=(0,f.Ib)(t,o,s);if(u<a-10){i.restore();return}(0,f._e)(i,u-13,33,s,t,o),(0,f.bQ)(i,u,d,"black");let h=(0,c.km)(t),p=2==h.length&&h[1];if(p&&(i.font=`bold 16px ${x}`,i.fillStyle="black",i.fillText(p,u-20,d+6)),e.speedConfig.displayLetter){i.font=`9px ${x}`,i.fillStyle="white";let e=h[0];i.fillText(e,u,d+3)}i.restore()})(e,l,r);(function(e){let{ctx:t,speedConfig:n}=e,i=n.clef,r=m(e);for(let e of l.ZP.getPressedNotes().keys()){let l=(0,f.Ib)(e,i,r),o=g()-2;(0,f.bQ)(t,o,l,"red");let s=(0,c.km)(e);2===s.length&&(t.fillStyle="black",(0,f.l_)(t,c.pE.accidentalSharp,o-17,l,f.lU)),n.displayLetter&&(t.font=`9px ${x}`,t.fillStyle="white",t.fillText(s[0],o,l+3))}})(e)}({ctx:e,canvasSize:t,speedState:S,speedConfig:v})}})}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[(0,i.jsx)(w,{speedState:S}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)("button",{style:{width:150,height:40,backgroundColor:"#C4C4C4",border:"1px solid black"},onClick:()=>T({...S,complete:!1,currentNoteIndex:0,startTime:new Date,lastNoteHitTime:new Date,correct:0,speed:0}),children:"Restart"}),(0,i.jsx)(r.ne,{height:20}),(0,i.jsx)("button",{style:{width:150,height:40,backgroundColor:"#C4C4C4",border:"1px solid black"},onClick:()=>T({complete:!1,notes:k(v.clef,v.keySignature),currentNoteIndex:0,startTime:new Date,lastNoteHitTime:new Date,correct:0,title:"Random",speed:0}),children:"Next"})]})]})]})]})]})}function w({speedState:e}){let{correct:t,notes:n,currentNoteIndex:l,lastNoteHitTime:o,startTime:s}=e,c=(0,u.NM)(t/l*100,2),a=(0,u.NM)(l/(o.getTime()-s.getTime())*6e4,2);return(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"center",visibility:e.complete?"visible":"hidden"},children:[(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:200},children:[(0,i.jsx)("span",{style:{fontSize:32},children:"Speed"}),(0,i.jsx)(r.ne,{height:8}),(0,i.jsxs)("span",{children:[a," notes/minute"]})]}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:200},children:[(0,i.jsx)("span",{style:{fontSize:32},children:"Accuracy"}),(0,i.jsx)(r.ne,{height:8}),(0,i.jsxs)("span",{children:[c,"%"]})]})]})}function k(e,t){let n=4,i=5;return"bass"===e&&(n=2,i=3),Array.from({length:20}).map(()=>(0,c.Nr)(n,i,"C"))}},8818:function(e,t,n){"use strict";n.d(t,{p:function(){return l}});var i=n(7704);let r=null;function l(){null==r||r.play()}(0,i.jU)()&&((r=new Audio("/effects/wrong-sound-effect.mp3")).playbackRate=6,r.volume=.08)},5566:function(e){var t,n,i,r=e.exports={};function l(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===l||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:l}catch(e){t=l}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var c=[],a=!1,u=-1;function d(){a&&i&&(a=!1,i.length?c=i.concat(c):u=-1,c.length&&h())}function h(){if(!a){var e=s(d);a=!0;for(var t=c.length;t;){for(i=c,c=[];++u<t;)i&&i[u].run();u=-1,t=c.length}i=null,a=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function x(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||a||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},function(e){e.O(0,[512,656,887,269,582,971,69,744],function(){return e(e.s=3375)}),_N_E=e.O()}]);