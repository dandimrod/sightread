(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2727:function(e,t,i){Promise.resolve().then(i.t.bind(i,5250,23)),Promise.resolve().then(i.bind(i,3311)),Promise.resolve().then(i.bind(i,8388)),Promise.resolve().then(i.bind(i,5802)),Promise.resolve().then(i.bind(i,7647)),Promise.resolve().then(i.bind(i,94)),Promise.resolve().then(i.bind(i,9880)),Promise.resolve().then(i.bind(i,5149)),Promise.resolve().then(i.bind(i,4754)),Promise.resolve().then(i.bind(i,9505))},7447:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{getImageProps:function(){return l},default:function(){return s}});let n=i(6921),r=i(8630),o=i(1749),a=n._(i(536)),l=e=>{let{props:t}=(0,r.getImgProps)(e,{defaultLoader:a.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/sightread/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,i]of Object.entries(t))void 0===i&&delete t[e];return{props:t}},s=o.Image},3311:function(e,t,i){"use strict";i.r(t),i.d(t,{FeaturedSongsPreview:function(){return b}});var n=i(7437),r=i(3887),o=i(1241),a=i(7945),l=i(6661),s=i(3167),d=i(7447),u=i.n(d),c=i(2265);let f={prelude:{source:"builtin",id:"fa7a5d0bf5012a4cb4a19f1de2e58b10"},ode:{source:"builtin",id:"8d4441d47b332772da481c529bd38e24"},canon:{source:"builtin",id:"7641a769d0e9ec9c95b2b967f2ad2cf3"}};function b({marginTop:e}){let t=(0,a.FI)(),[i,d]=(0,c.useState)("ode"),{id:b,source:h}=f[i],m=!t.canPlay,g=(0,r.nn)();return(0,a.OR)("keydown",e=>{if(" "===e.key){e.preventDefault(),g.toggle();return}}),(0,a.L8)(()=>g.pause()),(0,n.jsxs)("div",{className:(0,s.Z)("relative h-[400px] w-3/4 max-w-[760px]  self-center","bg-gray-[#2e2e2e] overflow-hidden rounded-lg","shadow-xl"),style:{minWidth:"min(100vw - 40px, 400px)",marginTop:e},children:[(0,n.jsx)(o.F,{songId:b,source:h}),m&&(0,n.jsx)(u(),{alt:"falling notes of ode to joy",src:"/public/images/featured-songs-placeholder.png",fill:!0,priority:!0}),(0,n.jsxs)("div",{className:"absolute top-0 flex h-[50px] w-full items-center justify-center bg-black/80",children:[(0,n.jsx)("button",{className:(0,s.Z)("items-center gap-1 text-white hover:text-gray-300","absolute left-5 flex sm:static",!t.canPlay&&"cursor-progress"),onClick:()=>g.toggle(),children:t.playing?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.dzL,{size:24}),"Pause"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.shV,{size:24}),"Play"]})}),(0,n.jsx)("div",{className:"absolute right-5 top-1/2 -translate-y-1/2 text-white",style:{transform:"translateY(-50%)"},children:(0,n.jsxs)("select",{style:{padding:6,backgroundColor:"#2e2e2e",color:"white",fontSize:14,fontWeight:700,border:"none"},onChange:e=>{d(e.target.value)},children:[(0,n.jsx)("option",{value:"ode",children:"Ode to Joy"}),(0,n.jsx)("option",{value:"canon",children:"Canon in D"}),(0,n.jsx)("option",{value:"prelude",children:"Prelude I in C Major"})]})})]})]})}},1241:function(e,t,i){"use strict";i.d(t,{F:function(){return d}});var n=i(7437),r=i(4620),o=i(3887),a=i(7397),l=i(2265),s=i(869);function d({songId:e,source:t}){let{data:i,error:d}=(0,r.h)(e,t),u=(0,o.nn)();(0,l.useEffect)(()=>{i&&u.setSong(i,(0,s.q3)(i))},[i,u]);let c=(0,s.q3)(i,!0);return(0,n.jsx)(a.LX,{song:i,config:c,getTime:()=>u.getTime(),hand:"both",handSettings:(0,a.pA)(c)})}},7397:function(e,t,i){"use strict";i.d(t,{LX:function(){return U},pA:function(){return u.pA},pF:function(){return u.pF}});var n=i(7437),r=i(4012),o=i(5161),a=i(7945),l=i(2265),s=i(3887),d=i(9968),u=i(869),c=i(2582),f=i(7704),b=i(6242),h=i(3578),m=i(6094);let g="Arial",p=c.lU;function v(e){return e.height/2-50-80}function y(e){return e.height/2+50}function S(){return 100+c.lU}function x(){return S()+3*c.lU}function w(e){let t=(0,h.SQ)(e.keySignature).notes.length;return x()+t*c.lU+c.lU}function k(e){return w(e)+4*c.lU}let P={primary:"121,74,227",hover:"185,154,244",disabled:"100,100,100",black:"0,0,0"},j={A:"12,23,141",B:"75,32,139",C:"217,59,38",D:"238,151,56",E:"253,229,65",F:"62,139,38",G:"139,210,250"};function C(e,t){let i=t.time*e.pps-e.viewport.start,n=i+("note"===t.type?t.duration:100)*e.pps;return{start:i,end:n}}function N(e,t){t.addColorStop(0,`rgba(${e},0)`),t.addColorStop(.5,`rgba(${e},0.1)`),t.addColorStop(.8,`rgba(${e},0.3`),t.addColorStop(1,`rgba(${e},1)`)}function E(e,t){return e?j[t]:P.black}var U=function({song:e,config:t,hand:i,handSettings:j,selectedRange:U,getTime:M,constrictView:T=!0,enableTouchscroll:B=!1,game:_=!1}){let{width:z,height:F,measureRef:L}=(0,a.tH)(),R=(0,l.useRef)(),$=(0,s.nn)(),D=(0,l.useMemo)(()=>{var e;return(null===(e=R.current)||void 0===e?void 0:e.getBoundingClientRect())??{}},[z,F]);return(0,n.jsx)("div",{className:"absolute h-full w-full touch-none",ref:L,onPointerMove:e=>B&&o.ER($,e.nativeEvent),onPointerDown:e=>B&&o.DZ($,e.nativeEvent),onPointerUp:e=>B&&o.vo($,e.nativeEvent),children:(0,n.jsx)(r.Xz,{ref:R,render:function(n,{width:r,height:o}){var a;e&&("falling-notes"===(a={time:M(),visualization:t.visualization,drawNotes:t.noteLetter,coloredNotes:t.coloredNotes,windowWidth:r,height:o,pps:u.i6,hands:j,hand:i,ctx:n,items:e.items,constrictView:!!T,keySignature:t.keySignature??e.keySignature,timeSignature:e.timeSignature,canvasRect:D,selectedRange:U,game:_,player:$}).visualization?(0,d.B0)(a):function(e){let t={...e,viewport:{start:e.time*e.pps,end:e.time*e.pps+(e.windowWidth-100)}};t.ctx.clearRect(0,0,t.windowWidth,t.height),function(e){let{ctx:t}=e;t.fillStyle="black",t.strokeStyle="black";let i=v(e),n=y(e);(0,c.jp)(e.ctx,100,i,e.windowWidth),(0,c.jp)(e.ctx,100,n,e.windowWidth)}(t);let i=(0,u.EF)(t,e=>C(t,e).end>=0,e=>C(t,e).start>t.windowWidth);for(let e of i)"measure"!==e.type&&function(e,t){var i;let{ctx:n,pps:r,keySignature:o}=e,a=C(e,t).start,l=(null===(i=e.hands)||void 0===i?void 0:i[t.track].hand)==="right"?"treble":"bass",s="treble"===l?v(e):y(e),d=k(e),u=a+d+b.Xv/2,f=n.createLinearGradient(d-2*c.lU,0,d,0);N("0,0,0",f),n.fillStyle=f,n.strokeStyle=f,(0,b._e)(n,u-c.lU,2*c.lU,s,t.midiNote,l,e.keySignature)}(t,e);for(let e of i)"measure"!==e.type&&function(e,t){var i,n,r,o,a;let{ctx:l,pps:d,keySignature:u}=e;l.save();let p=Math.round(d*t.duration),S=C(e,t).start;(o=S)+(a=p)<0||o>=0||(0,f.B_)("#8147EB","#000000",Math.max((o+a)/a,.15));let x=(null===(i=e.hands)||void 0===i?void 0:i[t.track].hand)==="right"?"treble":"bass",w="treble"===x?v(e):y(e),j=k(e),U=S+j+b.Xv/2,M=(0,b.Ib)(t.midiNote,x,w,u),T=(0,h.km)(t.midiNote,e.keySignature),B=e.game?function(e,t,i){let n=k(e);return(0,s.K9)(e.player,t)&&m.ZP.getPressedNotes().has(t.midiNote)?P.hover:(0,s.Rj)(e.player,t)?P.disabled:i<=n?P.primary:P.black}(e,t,U):(n=e.coloredNotes,r=T[0],U<=k(e)?P.primary:E(n,r)),_=p-c.lU,z=l.createLinearGradient(j-2*c.lU,0,j,0);if(N(B,z),l.fillStyle=z,l.strokeStyle=z,l.fillRect(U+c.lU/2,M-5,_,10),l.globalCompositeOperation="source-over",U<j-2*c.lU){l.restore();return}(0,b.bQ)(l,U,M,z);let F=2==T.length&&T[1];if(F){let e="#"===F?h.pE.accidentalSharp:h.pE.accidentalFlat,t=U-(c.lU+8);(0,b.l_)(l,e,t,M,64,z)}if(e.drawNotes){l.font=`9px ${g}`,l.fillStyle="white";let e=T[0];l.fillText(e,U,M+3)}l.restore()}(t,e);(function(e){let{ctx:t,keySignature:i}=e,n=k(e)-2*c.lU;t.clearRect(0,0,n,e.height),t.fillStyle="black",t.strokeStyle="black";let r=e.height/2+130;(0,c.NS)(e.ctx,75,r,260);let o=v(e),a=y(e);(0,c.jp)(e.ctx,100,o,n),(0,c.jp)(e.ctx,100,a,n),(0,c.d4)(e.ctx,100,o-1,a+80+1);let l=o-p,s=a+80+p;if((0,c.Qb)(t,k(e)-2,l,s),(0,c.p5)(t,S(),o),(0,c.oN)(t,S(),a),(0,c.B8)(t,x(),o,i,"treble"),(0,c.B8)(t,x(),a,i,"bass"),e.timeSignature){let i=w(e);(0,c.eN)(t,i,o,e.timeSignature),(0,c.eN)(t,i,a,e.timeSignature)}})(t),function(e,t){let{ctx:i}=e;for(let r of m.ZP.getPressedNotes().keys()){let o=r<(0,h.qC)("C4")?"bass":"treble",a=t.find(e=>"note"===e.type&&e.midiNote===+r);if(a){var n;o=(null===(n=e.hands)||void 0===n?void 0:n[a.track].hand)==="right"?"treble":"bass"}if(e.game&&(0,s.K9)(e.player,a))return;let l="bass"===o?y(e):v(e),d=(0,b.Ib)(r,o,l),u=k(e)-2,c=(0,h.km)(r);if((0,b.bQ)(i,u,d,e.coloredNotes?`rgba(${E(!0,c[0])},1)`:"red"),2===c.length){let t=e.coloredNotes?`rgba(${E(!0,c[0])},1)`:"black";(0,b.l_)(i,h.pE.accidentalSharp,u-24,d,48,t)}e.drawNotes&&(i.font=`9px ${g}`,i.fillStyle="white",i.fillText(c[0],u,d+3))}}(t,i)}(a))}})})}},4620:function(e,t,i){"use strict";i.d(t,{h:function(){return u}});var n=i(4551),r=i(9866),o=i(8016),a=i(8620).Buffer;let l=i(915),s=new Map(l.map(e=>[e.id,e]));function d(e){return e.arrayBuffer().then(n.xz)}function u(e,t){return(0,o.ZP)([e,t],([e,t])=>(function(e,t){switch(t){case"midishare":case"builtin":let i=function(e,t){var i;if("midishare"===t)return`https://assets.midishare.dev/scores/${e}/${e}.mid`;let n=null===(i=s.get(e))||void 0===i?void 0:i.file;if(!n)throw Error("Song "+e+" not found");return"/"+n}(e,t);return fetch(i).then(d);case"base64":return Promise.resolve(function(e){let t=a.from(decodeURIComponent(e),"base64");return(0,n.xz)(t.buffer)}(e));case"upload":return Promise.resolve((0,r.Zr)(e)).then(e=>null===e?Promise.reject(Error("Could not find song")):e);case"url":return fetch(e).then(d);default:return Promise.reject(Error(`Could not get song for ${e}, ${t}`))}})(e,t))}},915:function(e){"use strict";e.exports=JSON.parse('[{"file":"music/songs/Prelude I in C Major.mid","title":"Prelude I in C Major","artist":"Bach","source":"builtin","id":"fa7a5d0bf5012a4cb4a19f1de2e58b10","duration":119.14015151515304},{"file":"music/songs/Ode to Joy.mid","title":"Ode to Joy","artist":"Friedrich Schiller","source":"builtin","id":"8d4441d47b332772da481c529bd38e24","duration":33.850000000000016},{"file":"music/songs/Canon in D.mid","title":"Canon in D","artist":"Pachelbel","source":"builtin","id":"7641a769d0e9ec9c95b2b967f2ad2cf3","duration":127.08000000000034},{"file":"music/songs/Twinkle Twinkle Little Star.mid","title":"Twinkle Twinkle Little Star","artist":"Jane Taylor","source":"builtin","id":"b3fa743cca3ba0c6e0a9aa4f2a51092b","duration":23.95},{"file":"music/songs/Soon May The Wellerman Come.mid","title":"Soon May The Wellerman Come","source":"builtin","id":"eb574301c4eb30ad4d6a4dd57d091509","duration":119.9711538461538},{"file":"music/songs/The Star Spangled Banner.mid","title":"The Star Spangled Banner","artist":"John Smith","source":"builtin","id":"bb4edb91d3a12b8c745e59b8435f74c2","duration":64.45735294117637},{"file":"music/songs/Mexican Hat Dance.mid","title":"Mexican Hat Dance","artist":"Jesus Rubio","source":"builtin","id":"b50ee876b785c66a70dba3159d21e81e","duration":41.33263888888888},{"file":"music/songs/Comin Round The Mountain.mid","title":"Comin Round The Mountain","artist":"Sandberg and Wallace","source":"builtin","id":"4aaf49c8b4c28a7cea7433d54de2fcc9","duration":34.88181818181824},{"file":"music/songs/Blue Danube.mid","title":"Blue Danube","artist":"Johan Strauss","source":"builtin","id":"9b78807499154198f17eb7c8bff91879","duration":379.92857142857196},{"file":"music/songs/La Cucaracha.mid","title":"La Cucaracha","source":"builtin","id":"ba3bed184b79d04a48a19913ff29d6da","duration":47}]')}},function(e){e.O(0,[512,656,831,749,887,269,582,971,69,744],function(){return e(e.s=2727)}),_N_E=e.O()}]);